{"conn": "data_warehouse", "explore": ["explore: sf__opportunities {", "  persist_with: sfdc_oppty_data", "  from: sf__opportunities_extended", "  view_label: \"Opportunities\"", "  label: \"Opportunities\"", "  sql_always_where: NOT ${sf__opportunities.is_deleted} ;;", "", "  join: sf__accounts {", "    view_label: \"Accounts\"", "    sql_on: ${sf__opportunities.account_id} = ${sf__accounts.id} ;;", "    relationship: many_to_one", "  }", "", "  join: account_owners {", "    from: sf__users", "    sql_on: ${sf__accounts.owner_id} = ${account_owners.id} ;;", "    relationship: many_to_one", "  }", "", "  join: opportunity_contact_roles {", "    from: sf__opportunity_contact_role", "    sql_on: ${opportunity_contact_roles.opportunity_id} = ${sf__opportunities.id} and NOT ${opportunity_contact_roles.is_deleted} ;;", "    relationship: many_to_many", "  }", "", "  join: opportunity_contacts {", "    from: sf__contacts", "    sql_on: ${opportunity_contacts.id} = ${opportunity_contact_roles.contact_id} and NOT ${opportunity_contacts.is_deleted} ;;", "    relationship: one_to_many", "  }", "", "  join: opportunity_contact_campaign_memberships {", "    view_label: \"Opportunity Contact Campaign Members (6mo prior to close)\"", "    from:  sf__campaign_members", "    sql_on:", "      ${opportunity_contacts.id} = ${opportunity_contact_campaign_memberships.contact_id}", "      and ${opportunity_contact_campaign_memberships.created_date} >= DATE_ADD('month', -6, ${sf__opportunities.close_date})", "      and NOT ${opportunity_contact_campaign_memberships.is_deleted} ;;", "    relationship: one_to_many", "  }", "", "  join: opportunity_contact_campaigns {", "    view_label: \"Opportunity Contact Campaigns (6mo prior to close)\"", "    from:  sf__campaigns", "    sql_on: ${opportunity_contact_campaign_memberships.campaign_id} = ${opportunity_contact_campaigns.id} and NOT ${opportunity_contact_campaigns.is_deleted} ;;", "    relationship: many_to_one", "  }", "", "  join: sf__opportunity_history {", "    view_label: \"Opportunity History\"", "    sql_on: ${sf__opportunity_history.opportunity_id} = ${sf__opportunities.id} ;;", "    relationship: one_to_many", "  }", "", "  join: sf__opportunity_field_history {", "    view_label: \"Opportunity Field History\"", "    sql_on: ${sf__opportunity_field_history.opportunity_id} = ${sf__opportunities.id} ;;", "    relationship: one_to_many", "  }", "", "  join: campaign_members {", "    view_label: \"Opportunity Contact Campaign Members (no restriction)\"", "    from:  sf__campaign_members", "    sql_on: ${opportunity_contacts.id} = ${campaign_members.contact_id} ;;", "    relationship: one_to_many", "  }", "", "  join: campaigns {", "    view_label: \"Opportunity Contact Campaigns (no restriction)\"", "    from:  sf__campaigns", "    sql_on: ${campaign_members.campaign_id} = ${campaigns.id} ;;", "    relationship: many_to_one", "  }", "", "  join: opportunity_owners {", "    from: sf__users", "    sql_on: ${sf__opportunities.owner_id} = ${opportunity_owners.id} ;;", "    relationship: many_to_one", "  }", "", "  join: opportunity_creators {", "    from: sf__users", "    sql_on: ${sf__opportunities.created_by_id} = ${opportunity_creators.id} ;;", "    # Many opportunities can be created by the same person", "    relationship: many_to_one", "  }", "", "  join: opportunity_products {", "    from: sf__opportunity_products_extended", "    sql_on: ${sf__opportunities.id} = ${opportunity_products.opportunity_id} ;;", "    relationship: one_to_many", "  }", "", "  join: sf__deal_registrations {", "    view_label: \"Deal Registration\"", "    sql_on: ${sf__opportunities.id} = ${sf__deal_registrations.opportunity_c} ;;", "    relationship: one_to_one", "  }", "", "  join: opportunity_primary_campaign {", "    from:  sf__campaigns", "    view_label: \"Primary Campaign\"", "    sql_on: ${sf__opportunities.campaign_id} = ${opportunity_primary_campaign.id} ;;", "    relationship: many_to_one", "  }", "", "  join: finance_revenue_forecast {", "    view_label: \"Bookings Forecast\"", "    sql_on: ${finance_revenue_forecast.forecast_month} = ${sf__opportunities.close_month} ;;", "    relationship: many_to_one", "  }", "", "  join: finance_revenue_forecast_quarterly {", "    from: finance_revenue_forecast", "    view_label: \"Quarterly Bookings Forecast\"", "    sql_on: ${finance_revenue_forecast_quarterly.forecast_fiscal_quarter} = ${sf__opportunities.close_fiscal_quarter} ;;", "    relationship: many_to_many", "  }", "", "  join: cloud_revenue {", "    from: stripe_charges", "    sql_on: ${cloud_revenue.created_month} = ${sf__opportunities.close_month} ;;", "    relationship: many_to_many", "  }", "", "  join: docker_users {", "    from: reghub_dockeruser", "    sql_on: ${docker_users.domain_name} = ${sf__accounts.domain} ;;", "    relationship: many_to_one", "  }", "", "  join: ucp_licenses {", "    from: ucp_licensing", "    sql_on: ${ucp_licenses.hub_uuid} = replace(${docker_users.uuid}, '-','') ;;", "    required_joins: [docker_users]", "    relationship: many_to_one", "  }", "", "  join: ucp_usage {", "    sql_on: ${ucp_usage.license_key} = ${ucp_licenses.license_key} ;;", "    required_joins: [ucp_licenses]", "    relationship: many_to_one", "  }", "  join: sf__leads {", "    view_label: \"Leads\"", "    sql_on: ${sf__leads.converted_opportunity_id} = ${sf__opportunities.id} ;;", "    relationship: one_to_one", "  }", "}", ""], "explore_name": "sf__opportunities"}